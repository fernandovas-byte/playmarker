<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLAYMARKER</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .activity-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.2s;
        }
        .activity-card:hover {
            transform: translateY(-5px);
            background-color: #1e293b; /* slate-800 */
        }
        .swal2-popup {
            font-family: 'Inter', sans-serif;
        }
        .swal2-popup.swal2-dark {
            background-color: #1e293b;
            color: #e2e8f0;
        }
        .swal2-dark .swal2-title {
            color: #e2e8f0;
        }
        .swal2-dark .swal2-html-container {
            color: #94a3b8;
        }
        .crossword-grid {
            display: grid;
            grid-template-columns: repeat(var(--grid-size, 20), 25px);
            grid-template-rows: repeat(var(--grid-size, 20), 25px);
            gap: 1px;
        }
        .crossword-cell {
            width: 25px;
            height: 25px;
            border: 1px solid #334155; /* slate-700 */
            position: relative;
        }
        .crossword-cell.empty {
            background-color: transparent;
            border: 1px solid #1e293b; /* slate-800 */
        }
        .crossword-cell input {
            width: 100%;
            height: 100%;
            text-align: center;
            text-transform: uppercase;
            font-weight: bold;
            border: none;
            padding: 0;
            background-color: #334155; /* slate-700 */
            color: #e2e8f0; /* slate-200 */
        }
         .crossword-cell input:focus {
            outline: 2px solid #0ea5e9; /* sky-500 */
        }
        .crossword-cell .number {
            position: absolute;
            top: 1px;
            left: 2px;
            font-size: 10px;
            font-weight: bold;
            color: #7dd3fc; /* sky-300 */
        }
        .word-search-grid {
            display: grid;
            grid-template-columns: repeat(var(--grid-size, 15), 30px);
            user-select: none;
        }
        .word-search-cell {
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            text-transform: uppercase;
            border: 1px solid #334155; /* slate-700 */
            cursor: pointer;
        }
        .word-search-cell.selected {
            background-color: #38bdf8; /* sky-400 */
            color: white;
        }
        .word-search-cell.found {
            background-color: #0ea5e9; /* sky-500 */
            color: white;
        }
         .memory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 1rem;
        }
        .memory-card {
            perspective: 1000px;
            height: 100px;
            cursor: pointer;
        }
        .memory-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .memory-card.flipped .memory-card-inner {
            transform: rotateY(180deg);
        }
        .memory-card-front, .memory-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
        }
        .memory-card-front {
            background-color: #334155; /* slate-700 */
        }
        .memory-card-back {
            background-color: #475569; /* slate-600 */
            color: #e2e8f0; /* slate-200 */
            transform: rotateY(180deg);
            overflow: hidden;
            font-size: 0.875rem;
        }
        .memory-card-back img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        .image-preview {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            border: 2px solid #475569; /* slate-600 */
        }
        .timer-bar {
            height: 8px;
            background-color: #38bdf8; /* sky-400 */
            transition: width 1s linear;
        }
        .matching-game-container {
            position: relative;
        }
        .matching-item {
            cursor: pointer;
            padding: 1rem;
            background-color: #1e293b; /* slate-800 */
            border: 2px solid #334155; /* slate-700 */
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 80px;
        }
        .matching-item.selected {
            border-color: #38bdf8; /* sky-400 */
            background-color: #0c4a6e; /* sky-900 */
        }
        .matching-item img {
            max-height: 60px;
            max-width: 100%;
        }
        #matching-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        /* Rueda de la Palabra styles */
        .word-wheel-container {
            position: relative;
            width: 320px;
            height: 320px;
            margin: 1.5rem auto;
        }
        .word-wheel-letter {
            position: absolute;
            width: 40px;
            height: 40px;
            left: 50%;
            top: 50%;
            margin-left: -20px;
            margin-top: -20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.25rem;
            color: #475569; /* slate-600 */
            background-color: #0f172a; /* slate-900 */
            transition: all 0.2s ease-in-out;
        }
        .word-wheel-letter.active {
            background-color: #38bdf8; /* sky-400 */
            color: white;
        }
        .word-wheel-letter.current {
            transform: scale(1.3) !important;
            border: 4px solid white;
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.7); /* sky-400 */
            z-index: 10;
        }
        .word-wheel-letter.correct {
            background-color: #22c55e; /* green-500 */
            color: white;
        }
        .word-wheel-letter.incorrect {
            background-color: #ef4444; /* red-500 */
            color: white;
        }
        /* Word Order styles */
        .word-block {
            cursor: move;
            user-select: none;
        }
        .drop-zone {
            min-height: 80px;
            border: 2px dashed #475569; /* slate-600 */
        }
        .dragging {
            opacity: 0.5;
        }
        .card-icon {
            width: 40px;
            height: 40px;
            margin: 0 auto 0.75rem;
            color: #7dd3fc;
        }
    </style>
</head>
<body class="text-slate-200" style="background-color: #1126a4;">
    <div id="app" class="container mx-auto p-4 md:p-8">
        <!-- Main Screen -->
        <div id="main-screen">
             <header class="text-center mb-10">
                <div class="flex items-center justify-center gap-4">
                    <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAH0AfQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAn/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAABgj/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCoAACgoAAAAAIAACgAAAAAAAAAAIAACgAAAAAAAAAAAAgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAgAKgAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAAAAgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAKAAAAAIAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAACgAAgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAACgACAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAKAAIAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAACgAIAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoACAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAoAIAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAIAAqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAIAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAIAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAIAAqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAACgACAAKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAKAAIAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAgAKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAACgACAAKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAKAAIAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAgACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAIAAqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAACgACAAKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAKAAIAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAKAAIAACoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoAAgACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//ZAAEBAAIAAAAAAAAAAAAAAAAFAAEBAAAAAAAAAAAAAAAAAAAAAAD/2gAIAQIAAQUAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA-width="64" height="64" alt="Playmarker Logo">
                    <h1 class="text-4xl md:text-5xl font-extrabold text-white">PLAY<span style="color: #d14711;">MARKER</span></h1>
                </div>
                <p class="text-blue-200 mt-2 text-lg">Herramientas para que los profesores creen actividades interactivas.</p>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Crucigrama -->
                <div class="activity-card bg-slate-800/50 p-6 rounded-xl shadow-lg cursor-pointer" onclick="showScreen('crossword-form')">
                    <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 4.5V21m6-16.5V21M4.5 9h15m-15 6h15" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75h16.5v16.5H3.75z" />
                    </svg>
                    <h2 class="text-2xl font-bold text-sky-400 text-center">Crucigrama</h2>
                    <p class="text-slate-400 mt-2 text-center">Crea un crucigrama a partir de palabras y sus definiciones.</p>
                </div>
                <!-- Sopa de Letras -->
                <div class="activity-card bg-slate-800/50 p-6 rounded-xl shadow-lg cursor-pointer" onclick="showScreen('wordsearch-form')">
                    <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                        <text x="6" y="9" font-family="sans-serif" font-size="3" stroke-width="0.2" fill="currentColor">A</text>
                        <text x="10" y="9" font-family="sans-serif" font-size="3" stroke-width="0.2" fill="currentColor">B</text>
                        <text x="6" y="13" font-family="sans-serif" font-size="3" stroke-width="0.2" fill="currentColor">C</text>
                    </svg>
                    <h2 class="text-2xl font-bold text-sky-400 text-center">Sopa de Letras</h2>
                    <p class="text-slate-400 mt-2 text-center">Genera una sopa de letras con un listado de palabras.</p>
                </div>
                <!-- Ahorcado -->
                <div class="activity-card bg-slate-800/50 p-6 rounded-xl shadow-lg cursor-pointer" onclick="showScreen('hangman-form')">
                    <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 21h14M9 21V5a2 2 0 012-2h4a2 2 0 012 2v1M9 5h10M9 9h4" />
                        <circle cx="17" cy="9" r="2" />
                    </svg>
                    <h2 class="text-2xl font-bold text-sky-400 text-center">Ahorcado</h2>
                    <p class="text-slate-400 mt-2 text-center">Un juego clásico para adivinar palabras con pistas.</p>
                </div>
                 <!-- Evaluación -->
                <div class="activity-card bg-slate-800/50 p-6 rounded-xl shadow-lg cursor-pointer" onclick="showScreen('quiz-form')">
                    <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" />
                    </svg>
                    <h2 class="text-2xl font-bold text-sky-400 text-center">Evaluación</h2>
                    <p class="text-slate-400 mt-2 text-center">Diseña cuestionarios con varios tipos de preguntas.</p>
                </div>
                <!-- Concéntrese -->
                <div class="activity-card bg-slate-800/50 p-6 rounded-xl shadow-lg cursor-pointer" onclick="showScreen('memory-form')">
                   <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" transform="rotate(45 12 12)" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3.75H15.75c.414 0 .75.336.75.75v3.75c0 .414-.336.75-.75.75H8.25c-.414 0-.75-.336-.75-.75V4.5c0-.414.336-.75.75-.75zM8.25 15H15.75c.414 0 .75.336.75.75v3.75c0 .414-.336.75-.75.75H8.25c-.414 0-.75-.336-.75-.75V15.75c0-.414.336-.75.75-.75z"/>
                    </svg>
                    <h2 class="text-2xl font-bold text-sky-400 text-center">Concéntrese</h2>
                    <p class="text-slate-400 mt-2 text-center">Juego de memoria para encontrar parejas.</p>
                </div>
                 <!-- Sí o No -->
                <div class="activity-card bg-slate-800/50 p-6 rounded-xl shadow-lg cursor-pointer" onclick="showScreen('yesno-form')">
                    <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 9l-3 3m0 0l3 3m-3-3h7.5" transform="scale(0.8) translate(3 3)"/>
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12.75 15l3-3m0 0l-3-3m3 3H5.25" transform="scale(0.8) translate(3 3)"/>
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9 9 0 100-18 9 9 0 000 18z" />
                    </svg>
                    <h2 class="text-2xl font-bold text-sky-400 text-center">Sí o No</h2>
                    <p class="text-slate-400 mt-2 text-center">Crea frases y decide si son verdaderas o falsas.</p>
                </div>
                <!-- Emparejar -->
                <div class="activity-card bg-slate-800/50 p-6 rounded-xl shadow-lg cursor-pointer" onclick="showScreen('matching-form')">
                   <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 4.5h16.5M3.75 9h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 7.5l-4.5 4.5 4.5 4.5" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 7.5l4.5 4.5-4.5 4.5" />
                    </svg>
                    <h2 class="text-2xl font-bold text-sky-400 text-center">Emparejar</h2>
                    <p class="text-slate-400 mt-2 text-center">Crea un juego para relacionar conceptos con líneas.</p>
                </div>
                 <!-- Rueda la Palabra -->
                <div class="activity-card bg-slate-800/50 p-6 rounded-xl shadow-lg cursor-pointer" onclick="showScreen('wordwheel-form')">
                    <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.691V5.25a2.25 2.25 0 012.25-2.25h.008a2.25 2.25 0 012.25 2.25v5.198" />
                        <text x="11" y="14" font-family="sans-serif" font-size="5" stroke-width="0.3" fill="currentColor">A</text>
                    </svg>
                    <h2 class="text-2xl font-bold text-sky-400 text-center">Rueda la Palabra</h2>
                    <p class="text-slate-400 mt-2 text-center">Adivina cada palabra a partir de su inicial y una definición.</p>
                </div>
                 <!-- Ordenar Palabras -->
                <div class="activity-card bg-slate-800/50 p-6 rounded-xl shadow-lg cursor-pointer" onclick="showScreen('word-order-form')">
                    <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 21L6 16.5m4.5 4.5V3" />
                    </svg>
                    <h2 class="text-2xl font-bold text-sky-400 text-center">Ordenar Palabras</h2>
                    <p class="text-slate-400 mt-2 text-center">Crea frases para que los estudiantes ordenen las palabras.</p>
                </div>
            </div>
        </div>

        <!-- Dynamic Content Screen -->
        <div id="content-screen" class="hidden"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
    const appContainer = document.getElementById('app');
    const mainScreen = document.getElementById('main-screen');
    const contentScreen = document.getElementById('content-screen');

    function showScreen(screenId, payload) {
        mainScreen.classList.add('hidden');
        contentScreen.classList.remove('hidden');
        contentScreen.innerHTML = ''; 

        switch (screenId) {
            case 'crossword-form': renderCrosswordForm(contentScreen); break;
            case 'crossword-game': renderCrossword(contentScreen, payload); break;
            case 'wordsearch-form': renderWordSearchForm(contentScreen); break;
            case 'wordsearch-game': renderWordSearch(contentScreen, payload); break;
            case 'hangman-form': renderHangmanForm(contentScreen); break;
            case 'hangman-game': renderHangman(contentScreen, payload); break;
            case 'quiz-form': renderQuizForm(contentScreen); break;
            case 'quiz-game': renderQuiz(contentScreen, payload); break;
            case 'memory-form': renderMemoryForm(contentScreen); break;
            case 'memory-game': renderMemoryGame(contentScreen, payload); break;
            case 'yesno-form': renderYesNoForm(contentScreen); break;
            case 'yesno-game': renderYesNoGame(contentScreen, payload); break;
            case 'matching-form': renderMatchingForm(contentScreen); break;
            case 'matching-game': renderMatchingGame(contentScreen, payload); break;
            case 'wordwheel-form': renderWordWheelForm(contentScreen); break;
            case 'wordwheel-game': renderWordWheelGame(contentScreen, payload); break;
            case 'word-order-form': renderWordOrderForm(contentScreen); break;
            case 'word-order-game': renderWordOrderGame(contentScreen, payload); break;
        }
    }

    function showMainScreen() {
        mainScreen.classList.remove('hidden');
        contentScreen.classList.add('hidden');
        contentScreen.innerHTML = '';
    }

    function createHeader(title) {
        return `
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-bold text-sky-400">${title}</h1>
                <button onclick="showMainScreen()" class="bg-slate-700 text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-600 transition">Volver al Menú</button>
            </div>
        `;
    }
    
    function showFeedback(title, message, icon = 'success') {
        Swal.fire({
            title: title,
            text: message,
            icon: icon,
            confirmButtonColor: '#0ea5e9', // sky-500
            customClass: {
                popup: 'swal2-dark'
            }
        });
    }

    // --- SHARED HELPER FUNCTIONS ---
    async function fileToBase64(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => resolve(reader.result);
            reader.onerror = error => reject(error);
        });
    }

    function createContentInput(placeholder, isTitle = false) {
        const wrapperId = `content-input-${Date.now()}-${Math.random()}`;
        const wrapper = document.createElement('div');
        wrapper.className = 'content-input-wrapper space-y-2';
        wrapper.id = wrapperId;
        wrapper.innerHTML = `
            <select class="content-type w-full p-2 bg-slate-700 border-slate-600 text-slate-100 rounded-md text-sm">
                <option value="text">Contenido: Texto</option>
                <option value="image">Contenido: Imagen (desde archivo)</option>
            </select>
            <div class="input-holder">
                <input type="text" class="w-full p-2 bg-slate-700 border-slate-600 text-slate-100 rounded-md content-value placeholder-slate-400" placeholder="${placeholder}" required>
            </div>
        `;
        const select = wrapper.querySelector('.content-type');
        select.addEventListener('change', () => {
            const holder = wrapper.querySelector('.input-holder');
            if (select.value === 'image') {
                holder.innerHTML = `<input type="file" accept="image/*" class="w-full p-2 bg-slate-700 border-slate-600 text-slate-100 rounded-md content-value file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-sky-50 file:text-sky-700 hover:file:bg-sky-100" required>`;
            } else {
                holder.innerHTML = `<input type="text" class="w-full p-2 bg-slate-700 border-slate-600 text-slate-100 rounded-md content-value placeholder-slate-400" placeholder="${placeholder}" required>`;
            }
        });
        return wrapper;
    }
    
    async function processContentInput(wrapper) {
        const type = wrapper.querySelector('.content-type').value;
        const input = wrapper.querySelector('.content-value');
        let value;
        if (type === 'image') {
            if (input.files && input.files.length > 0) { value = await fileToBase64(input.files[0]); } else { value = ''; }
        } else { value = input.value; }
        return { type, value };
    }


    // --- Crucigrama ---
    function renderCrosswordForm(container) {
        container.innerHTML = `
            ${createHeader('Crear Crucigrama')}
            <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                <form id="crossword-creator-form">
                    <div class="mb-6">
                        <label for="cw-title" class="block text-lg font-medium text-slate-300 mb-2">Título del Crucigrama</label>
                        <input type="text" id="cw-title" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg placeholder-slate-400" placeholder="Ej: Capitales del Mundo">
                    </div>
                    <div id="cw-words-container" class="space-y-4 mb-6"></div>
                    <div class="flex justify-between items-center">
                         <button type="button" id="add-cw-word" class="bg-slate-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-slate-500 transition">Añadir Palabra</button>
                         <button type="submit" class="bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-500 transition text-lg">Crear y Jugar</button>
                    </div>
                </form>
            </div>
        `;

        const wordsContainer = container.querySelector('#cw-words-container');
        let wordCount = 0;
        function addWordPair() {
            wordCount++;
            const div = document.createElement('div');
            div.className = 'flex items-center gap-4 p-4 bg-slate-700/50 rounded-lg';
            div.innerHTML = `
                <div class="flex-1"><label class="block text-sm font-medium text-slate-400 mb-1">Palabra ${wordCount}</label><input type="text" class="w-full p-2 bg-slate-700 border-slate-600 text-slate-100 rounded-md cw-word" required></div>
                <div class="flex-1"><label class="block text-sm font-medium text-slate-400 mb-1">Pista ${wordCount}</label><input type="text" class="w-full p-2 bg-slate-700 border-slate-600 text-slate-100 rounded-md cw-clue" required></div>
                <button type="button" class="text-red-400 hover:text-red-500 font-semibold remove-word-btn">&times;</button>
            `;
            wordsContainer.appendChild(div);
            div.querySelector('.remove-word-btn').addEventListener('click', () => div.remove());
        }
        addWordPair(); addWordPair(); addWordPair();
        container.querySelector('#add-cw-word').addEventListener('click', addWordPair);
        container.querySelector('#crossword-creator-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const words = Array.from(document.querySelectorAll('.cw-word')).map(input => input.value.toUpperCase().trim()).filter(Boolean);
            const clues = Array.from(document.querySelectorAll('.cw-clue')).map(input => input.value.trim()).filter(Boolean);
            const title = document.getElementById('cw-title').value;
            if (words.length < 2 || words.length !== clues.length) { showFeedback('Error', 'Necesitas al menos 2 palabras con sus respectivas pistas.', 'error'); return; }
            const payload = { title, words: words.map((word, i) => ({ word, clue: clues[i] })) };
            showScreen('crossword-game', payload);
        });
    }

    function renderCrossword(container, payload) {
        function generateCrosswordGrid(wordsData) {
            const words = wordsData.map(d => d.word);
            words.sort((a, b) => b.length - a.length);
            let grid = Array(40).fill(null).map(() => Array(40).fill(null));
            let placedWords = [];
            if(words.length === 0) return { grid: [[]], across: {}, down: {}, unplaced: [] };
            const firstWord = words.shift();
            const startRow = Math.floor(grid.length / 2);
            const startCol = Math.floor((grid[0].length - firstWord.length) / 2);
            for (let i = 0; i < firstWord.length; i++) { grid[startRow][startCol + i] = { char: firstWord[i] }; }
            placedWords.push({ word: firstWord, row: startRow, col: startCol, direction: 'across' });
            let attempts = 0;
            while (words.length > 0 && attempts < 1000) {
                const wordToPlace = words.shift();
                let bestFit = null;
                for (let i = 0; i < wordToPlace.length; i++) {
                    const charToMatch = wordToPlace[i];
                    for (const pWord of placedWords) {
                        for (let j = 0; j < pWord.word.length; j++) {
                            if (pWord.word[j] === charToMatch) {
                                let newRow, newCol, newDirection;
                                let canPlace = true;
                                if (pWord.direction === 'across') { newDirection = 'down'; newRow = pWord.row - i; newCol = pWord.col + j; } 
                                else { newDirection = 'across'; newRow = pWord.row + j; newCol = pWord.col - i; }
                                if (newRow < 0 || newCol < 0) continue;
                                for (let k = 0; k < wordToPlace.length; k++) {
                                    let r = newRow, c = newCol;
                                    if (newDirection === 'across') c += k; else r += k;
                                    if(r >= grid.length || c >= grid[0].length) { canPlace = false; break; }
                                    const cell = grid[r][c];
                                    if (k === i) continue;
                                    if (cell && cell.char !== wordToPlace[k]) { canPlace = false; break; }
                                    if(newDirection === 'across') { if((grid[r-1] && grid[r-1][c]) || (grid[r+1] && grid[r+1][c])) { canPlace = false; break; } } 
                                    else { if(grid[r][c-1] || grid[r][c+1]) { canPlace = false; break; } }
                                }
                                if(canPlace) {
                                    if(newDirection === 'across') { if((grid[newRow][newCol-1]) || (grid[newRow][newCol + wordToPlace.length])) { canPlace = false; } } 
                                    else { if((grid[newRow-1] && grid[newRow-1][newCol]) || (grid[newRow + wordToPlace.length] && grid[newRow + wordToPlace.length][newCol])) { canPlace = false; } }
                                }
                                if (canPlace) { bestFit = { word: wordToPlace, row: newRow, col: newCol, direction: newDirection }; break; }
                            }
                        }
                        if(bestFit) break;
                    }
                    if(bestFit) break;
                }
                if (bestFit) {
                    for (let k = 0; k < bestFit.word.length; k++) {
                        let r = bestFit.row, c = bestFit.col;
                        if (bestFit.direction === 'across') c += k; else r += k;
                        grid[r][c] = { char: bestFit.word[k] };
                    }
                    placedWords.push(bestFit);
                } else { words.push(wordToPlace); }
                attempts++;
            }
            let minR = Infinity, maxR = -Infinity, minC = Infinity, maxC = -Infinity;
            for(let r=0; r<grid.length; r++) { for(let c=0; c<grid[0].length; c++) { if(grid[r][c]) { minR = Math.min(minR, r); maxR = Math.max(maxR, r); minC = Math.min(minC, c); maxC = Math.max(maxC, c); } } }
            if (minR === Infinity) return { grid: [[]], across: {}, down: {}, unplaced: wordsData.map(w=>w.word) };
            const trimmedGrid = grid.slice(minR -1, maxR + 2).map(row => row.slice(minC -1, maxC + 2));
            placedWords.forEach(p => { p.row -= (minR - 1); p.col -= (minC - 1); });
            let number = 1;
            const acrossClues = {}, downClues = {};
            placedWords.sort((a,b) => a.row - b.row || a.col - b.col);
            for (const pWord of placedWords) {
                const originalData = wordsData.find(d => d.word === pWord.word && !d.used);
                if (!originalData) continue;
                let isStartOfWord = pWord.direction === 'across' ? (pWord.col === 0 || !trimmedGrid[pWord.row][pWord.col - 1]) : (pWord.row === 0 || !trimmedGrid[pWord.row - 1][pWord.col]);
                if (!trimmedGrid[pWord.row][pWord.col].number && isStartOfWord) { trimmedGrid[pWord.row][pWord.col].number = number; }
                if (trimmedGrid[pWord.row][pWord.col].number && isStartOfWord) {
                     const currentNumber = trimmedGrid[pWord.row][pWord.col].number;
                     if (pWord.direction === 'across') { acrossClues[currentNumber] = originalData.clue; } else { downClues[currentNumber] = originalData.clue; }
                     originalData.used = true;
                }
                const nextWord = placedWords.find(w => w.row === pWord.row && w.col === pWord.col && w.word !== pWord.word);
                if(!nextWord && isStartOfWord) { number++; }
            }
            return { grid: trimmedGrid, across: acrossClues, down: downClues, unplaced: words };
        }
        
        const { grid, across, down, unplaced } = generateCrosswordGrid(JSON.parse(JSON.stringify(payload.words)));
        let unplacedMessage = unplaced.length > 0 ? `<div class="bg-yellow-200 border-l-4 border-yellow-500 text-yellow-800 p-4 my-4 rounded" role="alert"><p class="font-bold">Aviso</p><p>Las siguientes palabras no pudieron ser incluidas: ${unplaced.join(', ')}</p></div>` : '';
        
        container.innerHTML = `
            ${createHeader(payload.title || 'Crucigrama')}
            ${unplacedMessage}
            <div class="flex flex-col lg:flex-row gap-8">
                <div class="flex-1 overflow-x-auto">
                    <div id="crossword-grid-container" class="crossword-grid bg-slate-900 p-2 rounded-lg" style="--grid-size: ${grid[0].length}"></div>
                     <div class="mt-6 text-center space-x-4">
                        <button id="check-cw-btn" class="bg-sky-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-sky-500 transition">Verificar Respuestas</button>
                        <button id="download-cw-btn" class="bg-slate-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-slate-500 transition">Descargar</button>
                    </div>
                </div>
                <div class="w-full lg:w-1/3 bg-slate-800 p-6 rounded-lg shadow-md">
                    <h3 class="font-bold text-xl mb-3 text-sky-400 border-b border-slate-600 pb-2">Horizontales</h3><dl id="across-clues" class="space-y-2 text-slate-300"></dl>
                    <h3 class="font-bold text-xl mt-6 mb-3 text-sky-400 border-b border-slate-600 pb-2">Verticales</h3><dl id="down-clues" class="space-y-2 text-slate-300"></dl>
                </div>
            </div>`;

        const gridContainer = container.querySelector('#crossword-grid-container');
        for (let r = 0; r < grid.length; r++) { for (let c = 0; c < grid[0].length; c++) {
            const cellData = grid[r][c];
            const cell = document.createElement('div');
            cell.className = 'crossword-cell';
            if (!cellData) { cell.classList.add('empty'); cell.style.backgroundColor = 'transparent'; } 
            else { cell.innerHTML = `${cellData.number ? `<span class="number">${cellData.number}</span>` : ''}<input type="text" maxlength="1" data-row="${r}" data-col="${c}" data-char="${cellData.char}">`; }
            gridContainer.appendChild(cell);
        } }
        
        Object.entries(across).sort((a,b) => a[0] - b[0]).forEach(([num, clue]) => { container.querySelector('#across-clues').innerHTML += `<div class="flex"><dt class="font-bold w-8">${num}.</dt><dd>${clue}</dd></div>`; });
        Object.entries(down).sort((a,b) => a[0] - b[0]).forEach(([num, clue]) => { container.querySelector('#down-clues').innerHTML += `<div class="flex"><dt class="font-bold w-8">${num}.</dt><dd>${clue}</dd></div>`; });

        const inputs = gridContainer.querySelectorAll('input');
        inputs.forEach((input) => {
            input.addEventListener('input', (e) => {
                if (e.target.value) {
                    const row = parseInt(e.target.dataset.row), col = parseInt(e.target.dataset.col);
                    let nextInput = gridContainer.querySelector(`input[data-row="${row}"][data-col="${col + 1}"]`) || gridContainer.querySelector(`input[data-row="${row + 1}"][data-col="${col}"]`);
                    if(nextInput) nextInput.focus();
                }
            });
            input.addEventListener('keydown', (e) => {
                const row = parseInt(e.target.dataset.row), col = parseInt(e.target.dataset.col);
                let nextInput;
                switch(e.key) {
                    case 'ArrowRight': nextInput = gridContainer.querySelector(`input[data-row="${row}"][data-col="${col + 1}"]`); break;
                    case 'ArrowLeft': nextInput = gridContainer.querySelector(`input[data-row="${row}"][data-col="${col - 1}"]`); break;
                    case 'ArrowDown': nextInput = gridContainer.querySelector(`input[data-row="${row + 1}"][data-col="${col}"]`); break;
                    case 'ArrowUp': nextInput = gridContainer.querySelector(`input[data-row="${row - 1}"][data-col="${col}"]`); break;
                    case 'Backspace': if(!e.target.value) { let prevInput = gridContainer.querySelector(`input[data-row="${row}"][data-col="${col - 1}"]`) || gridContainer.querySelector(`input[data-row="${row - 1}"][data-col="${col}"]`); if(prevInput) prevInput.focus(); } break;
                }
                if(nextInput) { e.preventDefault(); nextInput.focus(); }
            });
        });
        container.querySelector('#check-cw-btn').addEventListener('click', () => {
            let correctCount = 0;
            inputs.forEach(input => {
                if (input.value) {
                    if (input.value.toUpperCase() === input.dataset.char) { input.style.backgroundColor = '#166534'; correctCount++; } 
                    else { input.style.backgroundColor = '#991b1b'; }
                } else { input.style.backgroundColor = '#334155'; }
            });
            if (correctCount === inputs.length) { showFeedback('¡Felicidades!', '¡Has completado el crucigrama correctamente!'); }
        });
        container.querySelector('#download-cw-btn').addEventListener('click', () => { downloadCrosswordAsSVG(grid, across, down, payload.title || "Crucigrama"); });
    }
    
    function downloadCrosswordAsSVG(grid, across, down, title) {
        const cellSize = 30, padding = 20, gridWidth = grid[0].length * cellSize, gridHeight = grid.length * cellSize, titleFontSize = 20, clueFontSize = 12, clueLineHeight = 15;
        const svgWidth = padding * 3 + gridWidth + 350, svgHeight = padding * 2 + titleFontSize + 20 + Math.max(gridHeight, (Object.keys(across).length + Object.keys(down).length) * clueLineHeight + 80);
        function escapeXML(str) { return typeof str !== 'string' ? '' : str.replace(/[<>&'"]/g, c => ({'<':'&lt;','>':'&gt;','&':'&amp;','\'':'&apos;','"':'&quot;'})[c]); }
        let svgContent = `<svg width="${svgWidth}" height="${svgHeight}" xmlns="http://www.w3.org/2000/svg" style="background-color: white; font-family: 'Inter', sans-serif;">`;
        svgContent += `<style>.clue-text { white-space: pre-wrap; }</style>`;
        svgContent += `<text x="${padding}" y="${padding + titleFontSize}" font-size="${titleFontSize}" font-weight="bold" fill="#1e293b">${escapeXML(title)}</text>`;
        const gridYOffset = padding + titleFontSize + 20;
        for (let r = 0; r < grid.length; r++) { for (let c = 0; c < grid[0].length; c++) {
            const x = padding + c * cellSize, y = gridYOffset + r * cellSize, cell = grid[r][c];
            svgContent += `<rect x="${x}" y="${y}" width="${cellSize}" height="${cellSize}" fill="white" stroke="${cell ? '#94a3b8' : '#e2e8f0'}" />`;
            if (cell && cell.number) { svgContent += `<text x="${x + 3}" y="${y + 11}" font-size="10" font-weight="bold" fill="#334155">${cell.number}</text>`; }
        } }
        const cluesX = padding + gridWidth + padding;
        let currentY = gridYOffset;
        svgContent += `<text x="${cluesX}" y="${currentY}" font-size="16" font-weight="bold" fill="#1e293b">Horizontales</text>`;
        currentY += clueLineHeight + 5;
        Object.entries(across).sort((a,b) => a[0]-b[0]).forEach(([num, clue]) => { svgContent += `<text x="${cluesX}" y="${currentY}" font-size="${clueFontSize}" fill="#334155" class="clue-text"><tspan font-weight="bold" dx="0">${num}. </tspan><tspan>${escapeXML(clue)}</tspan></text>`; currentY += clueLineHeight; });
        currentY += clueLineHeight * 1.5;
        svgContent += `<text x="${cluesX}" y="${currentY}" font-size="16" font-weight="bold" fill="#1e293b">Verticales</text>`;
        currentY += clueLineHeight + 5;
        Object.entries(down).sort((a,b) => a[0]-b[0]).forEach(([num, clue]) => { svgContent += `<text x="${cluesX}" y="${currentY}" font-size="${clueFontSize}" fill="#334155" class="clue-text"><tspan font-weight="bold" dx="0">${num}. </tspan><tspan>${escapeXML(clue)}</tspan></text>`; currentY += clueLineHeight; });
        svgContent += `</svg>`;
        const blob = new Blob([svgContent], { type: 'image/svg+xml;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href = url; a.download = `${(title || 'crucigrama').replace(/ /g, '_')}.svg`; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url);
    }
    
    // --- Sopa de Letras ---
    function renderWordSearchForm(container) {
        container.innerHTML = `
            ${createHeader('Crear Sopa de Letras')}
            <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                <form id="wordsearch-creator-form">
                    <div class="mb-6">
                        <label for="ws-title" class="block text-lg font-medium text-slate-300 mb-2">Título de la Sopa de Letras</label>
                        <input type="text" id="ws-title" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg" placeholder="Ej: Animales">
                    </div>
                    <div class="mb-6">
                        <label for="ws-words" class="block text-lg font-medium text-slate-300 mb-2">Palabras (separadas por coma)</label>
                        <textarea id="ws-words" rows="4" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg" placeholder="perro, gato, elefante, león..."></textarea>
                    </div>
                     <div class="mb-6">
                        <label for="ws-size" class="block text-lg font-medium text-slate-300 mb-2">Tamaño de la cuadrícula</label>
                        <input type="number" id="ws-size" value="15" min="10" max="25" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg">
                    </div>
                    <div class="text-right">
                         <button type="submit" class="bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-500 transition text-lg">Crear y Jugar</button>
                    </div>
                </form>
            </div>
        `;

        container.querySelector('#wordsearch-creator-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const title = document.getElementById('ws-title').value;
            const words = document.getElementById('ws-words').value.split(',').map(w => w.trim().toUpperCase()).filter(Boolean);
            const size = parseInt(document.getElementById('ws-size').value);
            if (words.length < 1) {
                showFeedback('Error', 'Necesitas al menos una palabra.', 'error');
                return;
            }
            showScreen('wordsearch-game', { title, words, size });
        });
    }

    function renderWordSearch(container, payload) {
        // Word search generation logic
        const { title, words, size } = payload;
        let grid = Array(size).fill(null).map(() => Array(size).fill(''));
        const placedWords = [];

        function placeWord(word) {
            const directions = [[0, 1], [1, 0], [1, 1], [0, -1], [-1, 0], [-1, -1], [1, -1], [-1, 1]];
            for (let i = 0; i < 100; i++) { // 100 attempts to place a word
                const dir = directions[Math.floor(Math.random() * directions.length)];
                const row = Math.floor(Math.random() * size);
                const col = Math.floor(Math.random() * size);

                let canPlace = true;
                for (let j = 0; j < word.length; j++) {
                    const newRow = row + j * dir[0];
                    const newCol = col + j * dir[1];
                    if (newRow < 0 || newRow >= size || newCol < 0 || newCol >= size || (grid[newRow][newCol] !== '' && grid[newRow][newCol] !== word[j])) {
                        canPlace = false;
                        break;
                    }
                }

                if (canPlace) {
                    for (let j = 0; j < word.length; j++) {
                        const newRow = row + j * dir[0];
                        const newCol = col + j * dir[1];
                        grid[newRow][newCol] = word[j];
                    }
                    placedWords.push(word);
                    return true;
                }
            }
            return false;
        }

        words.sort((a,b) => b.length - a.length).forEach(placeWord);
        
        // Fill empty cells
        const alphabet = "ABCDEFGHIJKLMNÑOPQRSTUVWXYZ";
        for (let r = 0; r < size; r++) {
            for (let c = 0; c < size; c++) {
                if (grid[r][c] === '') {
                    grid[r][c] = alphabet[Math.floor(Math.random() * alphabet.length)];
                }
            }
        }

        container.innerHTML = `
            ${createHeader(title || 'Sopa de Letras')}
            <div class="flex flex-col md:flex-row gap-8">
                <div class="flex-1">
                    <div id="wordsearch-grid-container" class="word-search-grid bg-slate-900 p-2 rounded-lg" style="--grid-size: ${size}">
                        ${grid.map((row, r) => row.map((cell, c) => `<div class="word-search-cell" data-row="${r}" data-col="${c}">${cell}</div>`).join('')).join('')}
                    </div>
                </div>
                <div class="w-full md:w-1/3 bg-slate-800 p-6 rounded-lg">
                    <h3 class="font-bold text-xl text-sky-400 mb-4">Palabras a encontrar:</h3>
                    <ul id="word-list" class="space-y-2">
                        ${words.map(word => `<li data-word="${word}">${word}</li>`).join('')}
                    </ul>
                </div>
            </div>
        `;
        
        const gridContainer = container.querySelector('#wordsearch-grid-container');
        const cells = Array.from(gridContainer.querySelectorAll('.word-search-cell'));
        let isSelecting = false;
        let selection = [];
        let startCell = null;

        cells.forEach(cell => {
            cell.addEventListener('mousedown', (e) => {
                isSelecting = true;
                startCell = e.target;
                selection = [startCell];
                startCell.classList.add('selected');
            });
            cell.addEventListener('mouseover', (e) => {
                if (isSelecting) {
                    selection.forEach(c => c.classList.remove('selected'));
                    selection = getLine(startCell, e.target);
                    selection.forEach(c => c.classList.add('selected'));
                }
            });
        });
        
        function getLine(cell1, cell2) {
            const r1 = parseInt(cell1.dataset.row), c1 = parseInt(cell1.dataset.col);
            const r2 = parseInt(cell2.dataset.row), c2 = parseInt(cell2.dataset.col);
            const line = [];
            const dr = Math.sign(r2 - r1), dc = Math.sign(c2 - c1);
            if (r1 === r2 || c1 === c2 || Math.abs(r1 - r2) === Math.abs(c1 - c2)) {
                 let r = r1, c = c1;
                 while(true) {
                     const currentCell = gridContainer.querySelector(`[data-row="${r}"][data-col="${c}"]`);
                     if(currentCell) line.push(currentCell);
                     if (r === r2 && c === c2) break;
                     r += dr; c += dc;
                 }
            } else {
                return [cell1];
            }
            return line;
        }

        document.addEventListener('mouseup', () => {
            if (isSelecting) {
                isSelecting = false;
                startCell = null;
                const selectedWord = selection.map(c => c.textContent).join('');
                const reversedSelectedWord = selectedWord.split('').reverse().join('');
                
                let found = false;
                const checkWord = (wordToCheck) => {
                    const wordListItem = container.querySelector(`#word-list li[data-word="${wordToCheck}"]`);
                    if (words.includes(wordToCheck) && wordListItem && !wordListItem.classList.contains('found-word')) {
                       wordListItem.classList.add('found-word');
                       wordListItem.style.textDecoration = 'line-through';
                       wordListItem.style.color = '#5eead4';
                       return true;
                    }
                    return false;
                }

                if (checkWord(selectedWord) || checkWord(reversedSelectedWord)) {
                    selection.forEach(c => {
                        c.classList.remove('selected');
                        c.classList.add('found');
                    });
                } else {
                    selection.forEach(c => c.classList.remove('selected'));
                }
                
                if (words.length === container.querySelectorAll('.found-word').length) {
                    showFeedback('¡Felicidades!', '¡Has encontrado todas las palabras!');
                }
            }
            selection = [];
        });
    }

    // --- Ahorcado ---
    function renderHangmanForm(container) {
        container.innerHTML = `
            ${createHeader('Crear Juego del Ahorcado')}
             <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                <form id="hangman-creator-form">
                    <div class="mb-6">
                        <label for="hm-title" class="block text-lg font-medium text-slate-300 mb-2">Título del Juego</label>
                        <input type="text" id="hm-title" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg" placeholder="Ej: Partes del Cuerpo">
                    </div>
                    <div id="hm-words-container" class="space-y-4 mb-6"></div>
                    <div class="flex justify-between items-center">
                         <button type="button" id="add-hm-word" class="bg-slate-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-slate-500 transition">Añadir Palabra</button>
                         <button type="submit" class="bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-500 transition text-lg">Crear y Jugar</button>
                    </div>
                </form>
            </div>
        `;
        const wordsContainer = container.querySelector('#hm-words-container');
        function addWordCluePair() {
            const div = document.createElement('div');
            div.className = 'flex items-center gap-4 p-4 bg-slate-700/50 rounded-lg';
            div.innerHTML = `
                <div class="flex-1"><input type="text" class="w-full p-2 bg-slate-700 border-slate-600 text-slate-100 rounded-md hm-word" placeholder="Palabra" required></div>
                <div class="flex-1"><input type="text" class="w-full p-2 bg-slate-700 border-slate-600 text-slate-100 rounded-md hm-clue" placeholder="Pista" required></div>
                <button type="button" class="text-red-400 hover:text-red-500 font-semibold remove-word-btn">&times;</button>
            `;
            wordsContainer.appendChild(div);
            div.querySelector('.remove-word-btn').addEventListener('click', () => div.remove());
        }
        addWordCluePair();
        container.querySelector('#add-hm-word').addEventListener('click', addWordCluePair);
        container.querySelector('#hangman-creator-form').addEventListener('submit', e => {
            e.preventDefault();
            const title = document.getElementById('hm-title').value;
            const words = Array.from(document.querySelectorAll('.hm-word')).map(i => i.value.trim().toUpperCase());
            const clues = Array.from(document.querySelectorAll('.hm-clue')).map(i => i.value.trim());
            if (words.some(w => w === '') || clues.some(c => c === '')) {
                showFeedback('Error', 'Asegúrate de que todas las palabras y pistas estén completas.', 'error');
                return;
            }
            const items = words.map((word, i) => ({ word, clue: clues[i] }));
            showScreen('hangman-game', { title, items });
        });
    }

    function renderHangman(container, payload) {
        let currentItemIndex = 0;
        let wrongGuesses = 0;
        const maxWrongGuesses = 6;
        let guessedLetters = [];
        
        function setupGame() {
            const item = payload.items[currentItemIndex];
            const word = item.word;
            wrongGuesses = 0;
            guessedLetters = [];

            container.innerHTML = `
                ${createHeader(payload.title || 'Ahorcado')}
                <div class="text-center">
                    <canvas id="hangman-canvas" width="200" height="250" class="mx-auto mb-4 bg-slate-800 rounded-lg"></canvas>
                    <p class="text-lg text-slate-400 mb-4">Pista: ${item.clue}</p>
                    <div id="word-display" class="flex justify-center gap-2 text-3xl font-bold mb-8">
                        ${word.split('').map(letter => `<div class="w-10 h-12 flex items-center justify-center border-b-4 ${letter === ' ' ? 'border-transparent' : 'border-slate-500'}">${letter === ' ' ? '&nbsp;' : '_'}</div>`).join('')}
                    </div>
                    <div id="keyboard" class="flex flex-wrap justify-center gap-2 max-w-xl mx-auto"></div>
                </div>
            `;

            const keyboard = container.querySelector('#keyboard');
            "ABCDEFGHIJKLMNÑOPQRSTUVWXYZ".split('').forEach(letter => {
                const btn = document.createElement('button');
                btn.className = "w-10 h-10 bg-slate-700 rounded-md font-bold hover:bg-slate-600 disabled:bg-slate-800 disabled:text-slate-500";
                btn.textContent = letter;
                btn.addEventListener('click', () => handleGuess(letter));
                keyboard.appendChild(btn);
            });
            drawHangman();
        }

        function handleGuess(letter) {
            if (guessedLetters.includes(letter)) return;
            guessedLetters.push(letter);
            
            const keyboardBtn = Array.from(container.querySelectorAll('#keyboard button')).find(b => b.textContent === letter);
            if(keyboardBtn) keyboardBtn.disabled = true;

            const word = payload.items[currentItemIndex].word;
            if (word.includes(letter)) {
                updateWordDisplay();
                if (isWordGuessed()) {
                    endGame(true);
                }
            } else {
                wrongGuesses++;
                drawHangman();
                if (wrongGuesses >= maxWrongGuesses) {
                    endGame(false);
                }
            }
        }

        function updateWordDisplay() {
            const word = payload.items[currentItemIndex].word;
            const wordDisplay = container.querySelector('#word-display');
            wordDisplay.innerHTML = word.split('').map(letter => 
                `<div class="w-10 h-12 flex items-center justify-center border-b-4 ${letter === ' ' ? 'border-transparent' : 'border-slate-500'}">
                    ${guessedLetters.includes(letter) || letter === ' ' ? letter : '_'}
                </div>`
            ).join('');
        }

        function isWordGuessed() {
            return payload.items[currentItemIndex].word.split('').every(letter => guessedLetters.includes(letter) || letter === ' ');
        }

        function drawHangman() {
            const canvas = document.getElementById('hangman-canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 3;

            // Base
            ctx.beginPath();
            ctx.moveTo(10, 240);
            ctx.lineTo(190, 240);
            ctx.stroke();

            // Pole
            if (wrongGuesses > 0) {
                ctx.moveTo(50, 240);
                ctx.lineTo(50, 10);
                ctx.stroke();
            }
            // Beam
            if (wrongGuesses > 1) {
                ctx.lineTo(150, 10);
                ctx.stroke();
            }
            // Rope
            if (wrongGuesses > 2) {
                ctx.lineTo(150, 50);
                ctx.stroke();
            }
            // Head
            if (wrongGuesses > 3) {
                ctx.beginPath();
                ctx.arc(150, 70, 20, 0, Math.PI * 2);
                ctx.stroke();
            }
            // Body
            if (wrongGuesses > 4) {
                ctx.beginPath();
                ctx.moveTo(150, 90);
                ctx.lineTo(150, 170);
                ctx.stroke();
            }
            // Arms & Legs
            if (wrongGuesses > 5) {
                ctx.moveTo(150, 110); ctx.lineTo(120, 140);
                ctx.moveTo(150, 110); ctx.lineTo(180, 140);
                ctx.moveTo(150, 170); ctx.lineTo(120, 200);
                ctx.moveTo(150, 170); ctx.lineTo(180, 200);
                ctx.stroke();
            }
        }
        
        function endGame(isWin) {
            const word = payload.items[currentItemIndex].word;
            Swal.fire({
                title: isWin ? '¡Ganaste!' : '¡Perdiste!',
                text: `La palabra era: ${word}`,
                icon: isWin ? 'success' : 'error',
                confirmButtonText: 'Siguiente Palabra',
                showCancelButton: true,
                cancelButtonText: 'Volver al Menú',
                customClass: { popup: 'swal2-dark' }
            }).then((result) => {
                if (result.isConfirmed) {
                    currentItemIndex = (currentItemIndex + 1) % payload.items.length;
                    setupGame();
                } else {
                    showMainScreen();
                }
            });
        }

        setupGame();
    }
    
    // --- Quiz ---
    function renderQuizForm(container) {
        let questionCount = 0;
        container.innerHTML = `
            ${createHeader('Crear Evaluación')}
            <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                <form id="quiz-creator-form">
                     <div class="mb-6">
                        <label for="quiz-title" class="block text-lg font-medium text-slate-300 mb-2">Título de la Evaluación</label>
                        <input type="text" id="quiz-title" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg" placeholder="Ej: Examen de Historia">
                    </div>
                    <div id="quiz-questions-container" class="space-y-6"></div>
                    <div class="flex justify-between items-center mt-8">
                         <button type="button" id="add-quiz-question" class="bg-slate-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-slate-500 transition">Añadir Pregunta</button>
                         <button type="submit" class="bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-500 transition text-lg">Crear y Jugar</button>
                    </div>
                </form>
            </div>
        `;

        const questionsContainer = container.querySelector('#quiz-questions-container');

        function addQuestion() {
            questionCount++;
            const qId = `q-${questionCount}`;
            const questionDiv = document.createElement('div');
            questionDiv.className = 'p-4 border border-slate-700 rounded-lg';
            questionDiv.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <label class="text-md font-semibold text-sky-400">Pregunta ${questionCount}</label>
                    <button type="button" class="text-red-400 hover:text-red-500 font-semibold remove-q-btn">&times;</button>
                </div>
                <input type="text" class="w-full p-2 bg-slate-700 border-slate-600 rounded-md mb-3 question-text" placeholder="Escribe la pregunta aquí..." required>
                <div class="space-y-2 options-container"></div>
                <button type="button" class="mt-2 text-sm text-sky-400 hover:text-sky-300 add-option-btn">+ Añadir opción</button>
            `;
            questionsContainer.appendChild(questionDiv);
            const optionsContainer = questionDiv.querySelector('.options-container');

            function addOption(isFirst = false) {
                 const optionDiv = document.createElement('div');
                 optionDiv.className = 'flex items-center gap-2';
                 optionDiv.innerHTML = `
                    <input type="radio" name="correct-answer-${qId}" class="form-radio bg-slate-900 border-slate-600 text-sky-500 focus:ring-sky-500" ${isFirst ? 'checked' : ''} required>
                    <input type="text" class="w-full p-2 bg-slate-600 border-slate-500 rounded-md text-sm option-text" placeholder="Texto de la opción" required>
                    <button type="button" class="text-slate-400 hover:text-slate-200 remove-option-btn">&times;</button>
                 `;
                 optionsContainer.appendChild(optionDiv);
                 optionDiv.querySelector('.remove-option-btn').addEventListener('click', () => optionDiv.remove());
            }

            addOption(true); addOption();
            questionDiv.querySelector('.add-option-btn').addEventListener('click', () => addOption());
            questionDiv.querySelector('.remove-q-btn').addEventListener('click', () => questionDiv.remove());
        }

        addQuestion();
        container.querySelector('#add-quiz-question').addEventListener('click', addQuestion);

        container.querySelector('#quiz-creator-form').addEventListener('submit', async e => {
            e.preventDefault();
            const title = document.getElementById('quiz-title').value;
            const questions = [];
            const questionDivs = document.querySelectorAll('#quiz-questions-container > div');
            for(const qDiv of questionDivs) {
                const questionText = qDiv.querySelector('.question-text').value;
                const options = [];
                let correctIndex = -1;
                const optionDivs = qDiv.querySelectorAll('.options-container > div');
                for(let i=0; i < optionDivs.length; i++) {
                    const oDiv = optionDivs[i];
                    options.push(oDiv.querySelector('.option-text').value);
                    if (oDiv.querySelector('input[type="radio"]').checked) {
                        correctIndex = i;
                    }
                }
                questions.push({ question: questionText, options, correct: correctIndex });
            }
             if (questions.length === 0) { showFeedback('Error', 'Debes añadir al menos una pregunta.', 'error'); return; }
            showScreen('quiz-game', { title, questions });
        });
    }

    function renderQuiz(container, payload) {
        let currentQuestionIndex = 0;
        let score = 0;
        
        function showQuestion() {
            if (currentQuestionIndex >= payload.questions.length) {
                showFeedback('¡Evaluación completada!', `Tu puntuación final es: ${score} de ${payload.questions.length}`, 'success');
                showMainScreen();
                return;
            }

            const q = payload.questions[currentQuestionIndex];
            container.innerHTML = `
                ${createHeader(payload.title || 'Evaluación')}
                <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                    <p class="text-slate-400 mb-2">Pregunta ${currentQuestionIndex + 1} de ${payload.questions.length}</p>
                    <h2 class="text-2xl font-bold mb-6">${q.question}</h2>
                    <div id="options-container" class="space-y-3">
                        ${q.options.map((opt, i) => `
                            <label class="block p-4 bg-slate-700 rounded-lg cursor-pointer hover:bg-slate-600 has-[:checked]:bg-sky-800 has-[:checked]:border-sky-500 border-2 border-transparent">
                                <input type="radio" name="answer" value="${i}" class="hidden">
                                <span>${opt}</span>
                            </label>
                        `).join('')}
                    </div>
                    <div class="text-right mt-8">
                        <button id="submit-answer-btn" class="bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-500 transition">Siguiente</button>
                    </div>
                </div>
            `;
            
            container.querySelector('#submit-answer-btn').addEventListener('click', () => {
                const selected = container.querySelector('input[name="answer"]:checked');
                if (!selected) { showFeedback('Atención', 'Debes seleccionar una respuesta.', 'warning'); return; }
                if (parseInt(selected.value) === q.correct) {
                    score++;
                }
                currentQuestionIndex++;
                showQuestion();
            });
        }
        showQuestion();
    }
    
    // --- Memory Game (Concéntrese) ---
    function renderMemoryForm(container) {
        container.innerHTML = `
            ${createHeader('Crear Concéntrese')}
            <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                <form id="memory-creator-form">
                    <div class="mb-6">
                        <label for="mem-title" class="block text-lg font-medium text-slate-300 mb-2">Título del Juego</label>
                        <input type="text" id="mem-title" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg" placeholder="Ej: Pares de Animales">
                    </div>
                    <div id="mem-pairs-container" class="space-y-4 mb-6"></div>
                    <div class="flex justify-between items-center">
                         <button type="button" id="add-mem-pair" class="bg-slate-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-slate-500 transition">Añadir Par</button>
                         <button type="submit" class="bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-500 transition text-lg">Crear y Jugar</button>
                    </div>
                </form>
            </div>
        `;

        const pairsContainer = container.querySelector('#mem-pairs-container');
        function addPair() {
            const pairDiv = document.createElement('div');
            pairDiv.className = 'flex items-center gap-4 p-4 bg-slate-700/50 rounded-lg mem-pair';
            const input1 = createContentInput('Contenido 1');
            const input2 = createContentInput('Contenido 2');
            const removeBtn = document.createElement('button');
            removeBtn.type = 'button';
            removeBtn.className = 'text-red-400 hover:text-red-500 font-semibold';
            removeBtn.innerHTML = '&times;';
            removeBtn.onclick = () => pairDiv.remove();
            
            pairDiv.append(input1, input2, removeBtn);
            pairsContainer.appendChild(pairDiv);
        }

        addPair(); addPair(); addPair();
        container.querySelector('#add-mem-pair').addEventListener('click', addPair);
        container.querySelector('#memory-creator-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const title = document.getElementById('mem-title').value;
            const pairs = [];
            const pairDivs = document.querySelectorAll('.mem-pair');
            for(const pDiv of pairDivs) {
                const inputs = pDiv.querySelectorAll('.content-input-wrapper');
                const item1 = await processContentInput(inputs[0]);
                const item2 = await processContentInput(inputs[1]);
                if (item1.value && item2.value) {
                    pairs.push({ item1, item2 });
                }
            }
            if(pairs.length < 2) { showFeedback('Error', 'Necesitas al menos 2 pares completos.', 'error'); return; }
            showScreen('memory-game', { title, pairs });
        });
    }

    function renderMemoryGame(container, payload) {
        let cards = [];
        payload.pairs.forEach((pair, index) => {
            cards.push({ id: index, content: pair.item1, key: `card-${index}-a` });
            cards.push({ id: index, content: pair.item2, key: `card-${index}-b` });
        });

        // Shuffle cards - Fisher-Yates
        for (let i = cards.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [cards[i], cards[j]] = [cards[j], cards[i]];
        }

        container.innerHTML = `
            ${createHeader(payload.title || 'Concéntrese')}
            <div id="memory-grid" class="memory-grid"></div>
        `;

        const grid = container.querySelector('#memory-grid');
        cards.forEach(card => {
            const cardEl = document.createElement('div');
            cardEl.className = 'memory-card';
            cardEl.dataset.id = card.id;
            cardEl.dataset.key = card.key;
            
            let backContent = '';
            if (card.content.type === 'image') {
                backContent = `<img src="${card.content.value}" alt="par">`;
            } else {
                backContent = `<span>${card.content.value}</span>`;
            }

            cardEl.innerHTML = `
                <div class="memory-card-inner">
                    <div class="memory-card-front"></div>
                    <div class="memory-card-back">${backContent}</div>
                </div>
            `;
            grid.appendChild(cardEl);
        });

        let flippedCards = [];
        let matchedPairs = 0;
        let isChecking = false;

        grid.addEventListener('click', e => {
            const card = e.target.closest('.memory-card');
            if (!card || card.classList.contains('flipped') || isChecking) return;

            card.classList.add('flipped');
            flippedCards.push(card);

            if (flippedCards.length === 2) {
                isChecking = true;
                const [card1, card2] = flippedCards;
                if (card1.dataset.id === card2.dataset.id) {
                    // Match!
                    matchedPairs++;
                    flippedCards = [];
                    isChecking = false;
                    if (matchedPairs === payload.pairs.length) {
                        setTimeout(() => showFeedback('¡Felicidades!', '¡Has encontrado todos los pares!', 'success'), 700);
                    }
                } else {
                    // No match
                    setTimeout(() => {
                        card1.classList.remove('flipped');
                        card2.classList.remove('flipped');
                        flippedCards = [];
                        isChecking = false;
                    }, 1200);
                }
            }
        });
    }

    // --- Yes/No Game ---
    function renderYesNoForm(container) {
        container.innerHTML = `
            ${createHeader('Crear Juego de Sí o No')}
            <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                <form id="yesno-creator-form">
                    <div class="mb-6">
                        <label for="yesno-title" class="block text-lg font-medium text-slate-300 mb-2">Título del Juego</label>
                        <input type="text" id="yesno-title" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg" placeholder="Ej: Verdadero o Falso sobre Ciencia">
                    </div>
                    <div id="yesno-statements-container" class="space-y-4 mb-6"></div>
                    <div class="flex justify-between items-center">
                         <button type="button" id="add-yesno-statement" class="bg-slate-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-slate-500 transition">Añadir Frase</button>
                         <button type="submit" class="bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-500 transition text-lg">Crear y Jugar</button>
                    </div>
                </form>
            </div>
        `;
        const statementsContainer = container.querySelector('#yesno-statements-container');
        function addStatement() {
            const div = document.createElement('div');
            div.className = 'p-4 bg-slate-700/50 rounded-lg statement-item';
            div.innerHTML = `
                <input type="text" class="w-full p-2 bg-slate-700 border-slate-600 rounded-md mb-2 statement-text" placeholder="Escribe la frase..." required>
                <div class="flex items-center gap-4">
                    <label class="flex items-center gap-2"><input type="radio" name="answer-${Math.random()}" value="true" class="form-radio bg-slate-900 border-slate-600 text-green-500" checked> Verdadero</label>
                    <label class="flex items-center gap-2"><input type="radio" name="answer-${Math.random()}" value="false" class="form-radio bg-slate-900 border-slate-600 text-red-500"> Falso</label>
                    <button type="button" class="ml-auto text-red-400 hover:text-red-500 font-semibold remove-statement-btn">&times;</button>
                </div>
            `;
            statementsContainer.appendChild(div);
            div.querySelector('.remove-statement-btn').addEventListener('click', () => div.remove());
        }
        addStatement();
        container.querySelector('#add-yesno-statement').addEventListener('click', addStatement);
        container.querySelector('#yesno-creator-form').addEventListener('submit', e => {
            e.preventDefault();
            const title = document.getElementById('yesno-title').value;
            const statements = [];
            document.querySelectorAll('.statement-item').forEach(item => {
                const text = item.querySelector('.statement-text').value;
                const isTrue = item.querySelector('input[value="true"]').checked;
                if (text) {
                    statements.push({ text, answer: isTrue });
                }
            });
            if (statements.length === 0) { showFeedback('Error', 'Debes añadir al menos una frase.', 'error'); return; }
            showScreen('yesno-game', { title, statements });
        });
    }

    function renderYesNoGame(container, payload) {
        let currentIndex = 0;
        let score = 0;
        
        function showStatement() {
             if (currentIndex >= payload.statements.length) {
                showFeedback('¡Juego Terminado!', `Puntuación: ${score} de ${payload.statements.length}`, 'success');
                showMainScreen();
                return;
            }
            const statement = payload.statements[currentIndex];
            container.innerHTML = `
                ${createHeader(payload.title || 'Sí o No')}
                 <div class="bg-slate-800 p-8 rounded-xl shadow-lg text-center">
                    <p class="text-slate-400 mb-4">Frase ${currentIndex + 1} de ${payload.statements.length}</p>
                    <p class="text-2xl min-h-[100px] flex items-center justify-center mb-8">${statement.text}</p>
                    <div class="flex justify-center gap-4">
                        <button id="true-btn" class="bg-green-600 text-white font-bold py-3 px-10 rounded-lg hover:bg-green-500 transition text-lg">Verdadero</button>
                        <button id="false-btn" class="bg-red-600 text-white font-bold py-3 px-10 rounded-lg hover:bg-red-500 transition text-lg">Falso</button>
                    </div>
                </div>
            `;
            const handleAnswer = (userAnswer) => {
                if(userAnswer === statement.answer) {
                    score++;
                    showFeedback('¡Correcto!', '', 'success');
                } else {
                    showFeedback('Incorrecto', `La respuesta era ${statement.answer ? 'Verdadero' : 'Falso'}.`, 'error');
                }
                currentIndex++;
                showStatement();
            };
            container.querySelector('#true-btn').onclick = () => handleAnswer(true);
            container.querySelector('#false-btn').onclick = () => handleAnswer(false);
        }
        showStatement();
    }
    
    // --- Matching Game ---
    function renderMatchingForm(container) {
        container.innerHTML = `
            ${createHeader('Crear Juego de Emparejar')}
            <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                <form id="matching-creator-form">
                     <div class="mb-6">
                        <label for="match-title" class="block text-lg font-medium text-slate-300 mb-2">Título del Juego</label>
                        <input type="text" id="match-title" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg" placeholder="Ej: Relaciona Capitales">
                    </div>
                    <div id="match-pairs-container" class="space-y-4 mb-6"></div>
                    <div class="flex justify-between items-center">
                        <button type="button" id="add-match-pair" class="bg-slate-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-slate-500 transition">Añadir Par</button>
                        <button type="submit" class="bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-500 transition text-lg">Crear y Jugar</button>
                    </div>
                </form>
            </div>
        `;
        const pairsContainer = container.querySelector('#match-pairs-container');
        function addPair() {
            const pairDiv = document.createElement('div');
            pairDiv.className = 'flex items-center gap-4 p-4 bg-slate-700/50 rounded-lg match-pair';
            const input1 = createContentInput('Elemento A');
            const input2 = createContentInput('Elemento B');
            const removeBtn = document.createElement('button');
            removeBtn.type = 'button';
            removeBtn.className = 'text-red-400 hover:text-red-500 font-semibold';
            removeBtn.innerHTML = '&times;';
            removeBtn.onclick = () => pairDiv.remove();
            pairDiv.append(input1, input2, removeBtn);
            pairsContainer.appendChild(pairDiv);
        }
        addPair(); addPair();
        container.querySelector('#add-match-pair').addEventListener('click', addPair);
        container.querySelector('#matching-creator-form').addEventListener('submit', async e => {
            e.preventDefault();
            const title = document.getElementById('match-title').value;
            const pairs = [];
            for(const pDiv of document.querySelectorAll('.match-pair')) {
                const inputs = pDiv.querySelectorAll('.content-input-wrapper');
                const item1 = await processContentInput(inputs[0]);
                const item2 = await processContentInput(inputs[1]);
                if (item1.value && item2.value) pairs.push({ item1, item2 });
            }
            if(pairs.length < 1) { showFeedback('Error', 'Necesitas al menos un par completo.', 'error'); return; }
            showScreen('matching-game', { title, pairs });
        });
    }

    function renderMatchingGame(container, payload) {
        const { title, pairs } = payload;
        const columnA = pairs.map((p, i) => ({ ...p.item1, id: i }));
        const columnB = pairs.map((p, i) => ({ ...p.item2, id: i }));
        columnB.sort(() => Math.random() - 0.5); // Shuffle column B

        const renderContent = (item) => item.type === 'image' ? `<img src="${item.value}" alt="par">` : `<span>${item.value}</span>`;

        container.innerHTML = `
            ${createHeader(title || 'Emparejar')}
            <div class="matching-game-container">
                <canvas id="matching-canvas"></canvas>
                <div class="grid grid-cols-2 gap-8 relative z-10">
                    <div id="column-a" class="space-y-2">${columnA.map(item => `<div class="matching-item" data-id="${item.id}">${renderContent(item)}</div>`).join('')}</div>
                    <div id="column-b" class="space-y-2">${columnB.map(item => `<div class="matching-item" data-id="${item.id}">${renderContent(item)}</div>`).join('')}</div>
                </div>
            </div>
        `;

        const canvas = container.querySelector('#matching-canvas');
        const colA = container.querySelector('#column-a');
        const colB = container.querySelector('#column-b');
        const ctx = canvas.getContext('2d');
        let selectedA = null, selectedB = null;
        const matchedPairs = [];
        
        function resizeCanvas() {
            const containerRect = container.querySelector('.matching-game-container').getBoundingClientRect();
            canvas.width = containerRect.width;
            canvas.height = containerRect.height;
            drawLines();
        }

        function getElementCenter(el) {
            const rect = el.getBoundingClientRect();
            const containerRect = canvas.getBoundingClientRect();
            return {
                x: rect.left - containerRect.left + rect.width / 2,
                y: rect.top - containerRect.top + rect.height / 2
            };
        }

        function drawLines() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#38bdf8';
            ctx.lineWidth = 3;
            matchedPairs.forEach(pair => {
                const start = getElementCenter(pair.a);
                const end = getElementCenter(pair.b);
                ctx.beginPath();
                ctx.moveTo(start.x, start.y);
                ctx.lineTo(end.x, end.y);
                ctx.stroke();
            });
        }
        
        const handleClick = (e, column, selectedVarSetter) => {
            const item = e.target.closest('.matching-item');
            if (!item || item.classList.contains('matched')) return;

            column.querySelectorAll('.matching-item').forEach(i => i.classList.remove('selected'));
            item.classList.add('selected');
            selectedVarSetter(item);

            if (selectedA && selectedB) {
                if (selectedA.dataset.id === selectedB.dataset.id) {
                    selectedA.classList.add('matched');
                    selectedB.classList.add('matched');
                    matchedPairs.push({ a: selectedA, b: selectedB });
                    drawLines();
                    if(matchedPairs.length === pairs.length) {
                        showFeedback('¡Felicidades!', 'Has completado todos los pares.', 'success');
                    }
                }
                setTimeout(() => {
                    selectedA?.classList.remove('selected');
                    selectedB?.classList.remove('selected');
                    selectedA = null;
                    selectedB = null;
                }, 300);
            }
        };

        colA.addEventListener('click', (e) => handleClick(e, colA, (item) => selectedA = item));
        colB.addEventListener('click', (e) => handleClick(e, colB, (item) => selectedB = item));
        
        setTimeout(resizeCanvas, 100);
        window.addEventListener('resize', resizeCanvas);
    }
    
    // --- Word Wheel ---
    function renderWordWheelForm(container) {
        container.innerHTML = `
            ${createHeader('Crear Rueda de la Palabra')}
            <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                 <form id="wordwheel-creator-form">
                    <div class="mb-6">
                        <label for="ww-title" class="block text-lg font-medium text-slate-300 mb-2">Título del Juego</label>
                        <input type="text" id="ww-title" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg" placeholder="Ej: Rosco de Cultura General">
                    </div>
                    <div id="ww-words-container" class="space-y-4 mb-6"></div>
                    <div class="flex justify-between items-center">
                         <button type="button" id="add-ww-word" class="bg-slate-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-slate-500 transition">Añadir Palabra</button>
                         <button type="submit" class="bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-500 transition text-lg">Crear y Jugar</button>
                    </div>
                </form>
            </div>
        `;
        const wordsContainer = container.querySelector('#ww-words-container');
        function addWordCluePair() {
            const div = document.createElement('div');
            div.className = 'flex items-center gap-4 p-4 bg-slate-700/50 rounded-lg';
            div.innerHTML = `
                <div class="flex-1"><input type="text" class="w-full p-2 bg-slate-700 border-slate-600 text-slate-100 rounded-md ww-word" placeholder="Palabra" required></div>
                <div class="flex-1"><input type="text" class="w-full p-2 bg-slate-700 border-slate-600 text-slate-100 rounded-md ww-clue" placeholder="Pista / Definición" required></div>
                <button type="button" class="text-red-400 hover:text-red-500 font-semibold remove-word-btn">&times;</button>
            `;
            wordsContainer.appendChild(div);
            div.querySelector('.remove-word-btn').addEventListener('click', () => div.remove());
        }
        addWordCluePair(); addWordCluePair();
        container.querySelector('#add-ww-word').addEventListener('click', addWordCluePair);
        container.querySelector('#wordwheel-creator-form').addEventListener('submit', e => {
            e.preventDefault();
            const title = document.getElementById('ww-title').value;
            const definitions = {};
            const words = Array.from(document.querySelectorAll('.ww-word'));
            const clues = Array.from(document.querySelectorAll('.ww-clue'));
            for(let i=0; i<words.length; i++) {
                const word = words[i].value.trim().toUpperCase();
                const clue = clues[i].value.trim();
                if (word && clue) {
                    const letter = word[0];
                    definitions[letter] = { word, clue, status: 'pending' };
                }
            }
            if(Object.keys(definitions).length === 0) { showFeedback('Error', 'Debes añadir al menos una palabra.', 'error'); return; }
            showScreen('wordwheel-game', { title, definitions });
        });
    }

    function renderWordWheelGame(container, payload) {
        const alphabet = "ABCDEFGHIJKLMNÑOPQRSTUVWXYZ".split('');
        let items = alphabet.map(letter => ({ letter, ...payload.definitions[letter] }));
        let activeItems = items.filter(item => item.word);
        let currentIndex = 0;
        let correct = 0, incorrect = 0;

        container.innerHTML = `
             ${createHeader(payload.title || 'Rueda la Palabra')}
             <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                <div id="word-wheel-container" class="word-wheel-container"></div>
                <div class="text-center">
                    <p class="text-lg text-slate-400">Con la <span id="current-letter" class="font-bold text-xl text-sky-400"></span>:</p>
                    <p id="current-clue" class="text-xl my-4 min-h-[56px]"></p>
                    <form id="answer-form" class="flex justify-center gap-2">
                        <input type="text" id="answer-input" class="w-64 p-2 bg-slate-700 border-slate-600 text-slate-100 rounded-md" required>
                        <button type="submit" class="bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg">Responder</button>
                    </form>
                    <button id="pass-btn" class="mt-2 bg-slate-600 text-white font-semibold py-2 px-4 rounded-lg">Pasapalabra</button>
                </div>
            </div>
        `;
        const wheelContainer = container.querySelector('#word-wheel-container');
        const radius = 140;
        alphabet.forEach((letter, i) => {
            const angle = (i / alphabet.length) * 2 * Math.PI - (Math.PI / 2);
            const x = radius * Math.cos(angle);
            const y = radius * Math.sin(angle);
            const letterDiv = document.createElement('div');
            letterDiv.className = 'word-wheel-letter';
            letterDiv.id = `letter-${letter}`;
            letterDiv.textContent = letter;
            letterDiv.style.transform = `translate(${x}px, ${y}px)`;
            if(payload.definitions[letter]) {
                letterDiv.classList.add('active');
            }
            wheelContainer.appendChild(letterDiv);
        });

        function updateTurn() {
            if (activeItems.every(item => item.status !== 'pending')) {
                showFeedback('¡Juego Terminado!', `Correctas: ${correct}. Incorrectas: ${incorrect}.`, 'success');
                showMainScreen();
                return;
            }
            
            let currentItem = activeItems[currentIndex];
            while(currentItem.status !== 'pending') {
                currentIndex = (currentIndex + 1) % activeItems.length;
                currentItem = activeItems[currentIndex];
            }

            document.querySelectorAll('.word-wheel-letter').forEach(el => el.classList.remove('current'));
            const currentLetterEl = document.getElementById(`letter-${currentItem.letter}`);
            currentLetterEl.classList.add('current');
            
            document.getElementById('current-letter').textContent = currentItem.letter;
            document.getElementById('current-clue').textContent = currentItem.clue;
            document.getElementById('answer-input').value = '';
            document.getElementById('answer-input').focus();
        }

        container.querySelector('#answer-form').addEventListener('submit', e => {
            e.preventDefault();
            const guess = document.getElementById('answer-input').value.trim().toUpperCase();
            const currentItem = activeItems[currentIndex];
            const letterEl = document.getElementById(`letter-${currentItem.letter}`);

            if (guess === currentItem.word) {
                currentItem.status = 'correct';
                letterEl.classList.add('correct');
                correct++;
            } else {
                currentItem.status = 'incorrect';
                letterEl.classList.add('incorrect');
                incorrect++;
            }
            currentIndex = (currentIndex + 1) % activeItems.length;
            updateTurn();
        });

        container.querySelector('#pass-btn').addEventListener('click', () => {
             currentIndex = (currentIndex + 1) % activeItems.length;
             updateTurn();
        });

        updateTurn();
    }
    
    // --- Word Order ---
    function renderWordOrderForm(container) {
        container.innerHTML = `
            ${createHeader('Crear Juego de Ordenar Palabras')}
            <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                <form id="word-order-form">
                    <div class="mb-6">
                        <label for="wo-title" class="block text-lg font-medium text-slate-300 mb-2">Título del Juego</label>
                        <input type="text" id="wo-title" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg" placeholder="Ej: Ordena las Frases">
                    </div>
                    <div class="mb-6">
                        <label for="wo-sentences" class="block text-lg font-medium text-slate-300 mb-2">Frases (una por línea)</label>
                        <textarea id="wo-sentences" rows="5" class="w-full p-3 bg-slate-700 border-slate-600 text-slate-100 rounded-lg" placeholder="El perro corre en el parque.\nLa luna brilla por la noche."></textarea>
                    </div>
                    <div class="text-right">
                        <button type="submit" class="bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-500 transition text-lg">Crear y Jugar</button>
                    </div>
                </form>
            </div>
        `;

        container.querySelector('#word-order-form').addEventListener('submit', e => {
            e.preventDefault();
            const title = document.getElementById('wo-title').value;
            const sentences = document.getElementById('wo-sentences').value.split('\n').map(s => s.trim()).filter(Boolean);
            if (sentences.length === 0) { showFeedback('Error', 'Necesitas al menos una frase.', 'error'); return; }
            showScreen('word-order-game', { title, sentences });
        });
    }

    function renderWordOrderGame(container, payload) {
        let currentSentenceIndex = 0;
        
        function setupSentence() {
            if (currentSentenceIndex >= payload.sentences.length) {
                showFeedback('¡Felicidades!', 'Has ordenado todas las frases.', 'success');
                showMainScreen();
                return;
            }
            const sentence = payload.sentences[currentSentenceIndex];
            const words = sentence.split(' ');
            const shuffledWords = [...words].sort(() => Math.random() - 0.5);

            container.innerHTML = `
                ${createHeader(payload.title || 'Ordenar Palabras')}
                <div class="bg-slate-800 p-8 rounded-xl shadow-lg">
                    <p class="text-slate-400 mb-4 text-center">Ordena la frase ${currentSentenceIndex + 1} de ${payload.sentences.length}</p>
                    <div id="drop-zone" class="drop-zone flex flex-wrap gap-4 p-4 rounded-lg bg-slate-900 mb-6 items-center"></div>
                    <div id="word-bank" class="flex flex-wrap gap-4 p-4 rounded-lg bg-slate-700/50 min-h-[80px] items-center">
                        ${shuffledWords.map(word => `<div class="word-block p-3 bg-sky-600 rounded-md font-semibold" draggable="true">${word}</div>`).join('')}
                    </div>
                    <div class="text-center mt-6">
                        <button id="check-order-btn" class="bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-500 transition">Verificar</button>
                         <button id="reset-order-btn" class="ml-4 bg-slate-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-slate-500 transition">Reiniciar</button>
                    </div>
                </div>
            `;
            
            const dropZone = container.querySelector('#drop-zone');
            const wordBank = container.querySelector('#word-bank');
            let draggedItem = null;

            container.querySelectorAll('.word-block').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    draggedItem = e.target;
                    setTimeout(() => e.target.classList.add('dragging'), 0);
                });
                item.addEventListener('dragend', (e) => {
                    e.target.classList.remove('dragging');
                });
            });

            [dropZone, wordBank].forEach(zone => {
                zone.addEventListener('dragover', e => {
                    e.preventDefault();
                });
                zone.addEventListener('drop', e => {
                    e.preventDefault();
                    if (draggedItem) {
                        zone.appendChild(draggedItem);
                        draggedItem = null;
                    }
                });
            });

            container.querySelector('#check-order-btn').addEventListener('click', () => {
                const orderedWords = Array.from(dropZone.querySelectorAll('.word-block')).map(w => w.textContent);
                const orderedSentence = orderedWords.join(' ');
                if (orderedSentence === sentence) {
                    showFeedback('¡Correcto!', '', 'success');
                    currentSentenceIndex++;
                    setupSentence();
                } else {
                    showFeedback('Incorrecto', 'Inténtalo de nuevo.', 'error');
                }
            });

            container.querySelector('#reset-order-btn').addEventListener('click', setupSentence);
        }
        
        setupSentence();
    }
    
    </script>
</body>
</html>

